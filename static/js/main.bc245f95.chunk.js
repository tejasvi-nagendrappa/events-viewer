(this["webpackJsonpevents-viewer"]=this["webpackJsonpevents-viewer"]||[]).push([[0],{249:function(e,t,n){},250:function(e,t,n){},251:function(e,t,n){},252:function(e,t,n){},253:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(25),i=n.n(c),o=n(147),s=n(148),u=n(165),l=n(160),d=n(264),j=n(10),b=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={hasError:!1,error:null,info:null},e}return Object(s.a)(n,[{key:"componentDidCatch",value:function(e,t){this.setState({hasError:!0,error:e,info:t})}},{key:"render",value:function(){var e=this.state,t=e.hasError,n=e.error,r=e.info,a="Description: ".concat(n)+"\n"+"Info: ".concat(r);return t?Object(j.jsx)(d.a,{message:"Error has occured",showIcon:!0,description:a,type:"error"}):this.props.children}}]),n}(r.Component),v=n(26),f=n(42),h=n.n(f),p=n(68),O=n(65),x=n(255),g=n(166),m=n(261),E=n(262),y=n(35),w=n(260),C=n(265),A=n(258),S=n(256),D="FETCH_EVENTS_SUCCESS",k="SHOW_EVENT_DETAIL",I="HIDE_EVENT_DETAIL",T="UPDATE_DATE_RANGE",z={422:["1. Starts at is not a valid date","2. Ends at is not a valid date","3. Limit is out of range","4. Offset is out of range"],401:["Not Authorized"],404:["Not Found"]},L=function(e){return e<10?"0".concat(e):e},P=function(e){var t=new Date(e),n=t.getFullYear(),r=L(t.getMonth()+1),a=L(t.getDate()),c=t.getHours(),i=L(t.getMinutes()),o=c>=12?"PM":"AM",s=L(c>12?c-12:c);return"".concat(a,"/").concat(r,"/").concat(n," , ").concat(s,":").concat(i," ").concat(o)},F=function(e){var t=e.events,n=e.isModalView,a=e.isLoading,c=Object(r.useContext)(ie),i=[{title:"Position",dataIndex:"position",key:"position",render:function(e){var t=e.name;return n?t:Object(j.jsx)(y.a,{type:"link",children:t})},onCell:function(e){return{onClick:function(){c({type:k,payload:{eventId:e.id}})}}}},{title:"Starts At",dataIndex:"startsAt",key:"startsAt",render:function(e){return P(e)}},{title:"Ends At",dataIndex:"endsAt",key:"endTime",render:function(e){return P(e)}}];return Object(j.jsx)(S.a,{bordered:n,columns:i,dataSource:t,pagination:!1,loading:!!a&&{size:"large",tip:"Fetching Events"},rowKey:function(e,t){var n=e.id,r=e.position;return"".concat(n,"-").concat(r.id,"-").concat(r.name,"-").concat(t)}})};F.defaultProps={isModalView:!1,isLoading:!1};var _=F,N=function(e){var t=e&&e.url||"",n="Basic "+btoa("frontend@shyftplan.com:api_test_auth_token"),r=Object(v.a)(Object(v.a)({},e),{},{headers:new Headers({Authorization:n}),credentials:"same-origin",method:e&&e.method||"GET",body:e&&"GET"!==e.method&&"HEAD"!==e.method&&JSON.stringify(e.requestParams)}),a=function(e){if(e){var t="".concat("https://fyx8bq1lpa.execute-api.eu-central-1.amazonaws.com","/").concat("Prod");return"".concat(t).concat(e)}return e}(t);return new Request(a,r)},M=function(){var e=Object(p.a)(h.a.mark((function e(t){var n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=N(t),e.next=3,fetch(n);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=function(e){return M(e)},H=function(e){var t=e.headers.get("content-type");if(t.includes("application/json"))return R(e);throw new Error("Content-type ".concat(t," not supported"))},R=function(){var e=Object(p.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.json();case 3:return n=e.sent,e.abrupt("return",n);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",Promise.reject({statusCode:t.status,error:e.t0}));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),q=function(e){var t="/events";return e&&(t=t+"?"+new URLSearchParams(e)),V({url:t}).then((function(e){return H(e)}))},B=function(e){return V({url:"/events/".concat(e)}).then((function(e){return H(e)}))},G=n(263),J=n(161),U=function(e){var t=e.listOfEmployees;return Object(j.jsx)(G.b,{header:Object(j.jsx)(A.a.Title,{level:5,children:"List of Employees"}),itemLayout:"horizontal",dataSource:t,rowKey:function(e){return e.id},renderItem:function(e){var t=e.firstName,n=e.lastName,r=e.image,a=e.id;return Object(j.jsx)(G.b.Item,{children:Object(j.jsx)(G.b.Item.Meta,{avatar:Object(j.jsx)(J.a,{src:r}),title:"".concat(t," ").concat(n),description:"Employee Id : ".concat(a)})})}})},K=function(e){var t=e.statusCode,n=z[t]||[],r=0===n.length?"Error occured while connecting to server.":"Error occured. This might be because of ";return[Object(j.jsx)(A.a.Text,{children:r},"generic"),n.map((function(e){return Object(j.jsx)(A.a.Text,{children:" ".concat(e," ")},"message-".concat(e))}))]},W={hasError:!1,loading:!0,eventDetails:{id:null,position:{},employees:[]}},Y=function(e){var t=e.eventId,n=Object(r.useState)(W),a=Object(O.a)(n,2),c=a[0],i=a[1],o=Object(r.useContext)(ie),s=c.loading,u=c.eventDetails,l=c.hasError,d=function(){var e=Object(p.a)(h.a.mark((function e(t){var n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B(t);case 3:n=e.sent,i({hasError:!1,loading:!1,eventDetails:n}),e.next=12;break;case 7:e.prev=7,e.t0=e.catch(0),r=e.t0.statusCode,g.b.error(Object(j.jsx)(K,{statusCode:r}),5),i({hasError:!0,loading:!1,eventDetails:W.eventDetails});case 12:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){d(t)}),[t]);var b=function(){o({type:I})};return Object(j.jsx)(E.a,{visible:!0,title:"Event Detail View",centered:!0,onCancel:b,footer:[Object(j.jsx)(y.a,{shape:"round",type:"primary",onClick:b,children:"Close"},"close")],children:s?Object(j.jsx)(w.a,{}):Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(C.b,{direction:"vertical",size:"large"}),!l&&Object(j.jsx)(_,{isModalView:!0,events:[u]}),Object(j.jsx)(C.b,{direction:"vertical",size:"large"}),Object(j.jsx)(C.b,{direction:"vertical",size:"large"}),!l&&Object(j.jsx)(U,{listOfEmployees:u.employees,loading:s}),l&&Object(j.jsx)(A.a.Text,{type:"danger",children:"Error occur while fetching Event Details."})]})})},Q=n(257),X=n(259),Z=(n(249),{startsAt:null,endsAt:null,pageSize:10}),$=Q.a.RangePicker,ee=function(e){var t=e.onFilterClick,n=Object(r.useState)(Z),a=Object(O.a)(n,2),c=a[0],i=a[1],o=c.startsAt,s=c.endsAt,u=c.pageSize;return Object(j.jsx)("div",{className:"EventFilter",children:Object(j.jsxs)(C.b,{direction:"horizontal",size:"large",children:[Object(j.jsx)("div",{children:Object(j.jsxs)(C.b,{direction:"horizontal",size:"middle",children:[Object(j.jsx)("label",{children:"Date Range"}),Object(j.jsx)($,{onChange:function(e){var t=Object(O.a)(e,2),n=t[0],r=t[1],a=n.toISOString(),o=r.toISOString();i(Object(v.a)(Object(v.a)({},c),{},{startsAt:a,endsAt:o}))},showTime:{use12Hours:!0}})]})}),Object(j.jsx)("div",{children:Object(j.jsxs)(C.b,{direction:"horizontal",size:"middle",children:[Object(j.jsx)("label",{children:"Page Size"}),Object(j.jsx)(X.a,{keyboard:!1,min:1,value:u,onChange:function(e){e&&i(Object(v.a)(Object(v.a)({},c),{},{pageSize:e}))}})]})}),Object(j.jsx)("div",{children:Object(j.jsx)(y.a,{type:"primary",shape:"round",onClick:function(){t(c)},disabled:!(o&&s),children:"Filter Events"})})]})})},te=(n(250),function(e){var t=e.onLoadMoreClick,n=e.isLastPage,r=e.footerText;return Object(j.jsxs)("div",{className:"ListViewFooter",children:[Object(j.jsx)(y.a,{shape:"round",type:"primary",onClick:t,disabled:n,children:"Load More"}),Object(j.jsx)("div",{className:"ListViewFooter__textwrapper",children:Object(j.jsx)(A.a.Text,{strong:!0,children:r})})]})}),ne=n(136),re=function(e,t){var n=t.type,r=t.payload;switch(n){case D:return function(e,t){var n=t.data,r=n.items,a=void 0===r?[]:r,c=n.pagination,i=c.offset,o=c.count,s=t.appendEvents,u=e.events;return Object(v.a)(Object(v.a)({},e),{},{events:s?[].concat(Object(ne.a)(u),Object(ne.a)(a)):a,currentPage:i+1,totalItemCount:o})}(e,r);case k:return function(e,t){var n=t.eventId;return Object(v.a)(Object(v.a)({},e),{},{eventDetail:{eventId:n,showDetails:!0}})}(e,r);case I:return function(e){return Object(v.a)(Object(v.a)({},e),{},{eventDetail:{showDetails:!1}})}(e);case T:return function(e,t){var n=t.data;return Object(v.a)(Object(v.a)({},e),n)}(e,r);default:return e}},ae=(n(251),x.a.Content),ce={eventDetail:{showDetails:!1,eventId:null},events:[],currentPage:1,pageSize:10,totalItemCount:10,startsAt:null,endsAt:null},ie=a.a.createContext(null),oe=function(){var e=Object(r.useReducer)(re,ce),t=Object(O.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(!0),i=Object(O.a)(c,2),o=i[0],s=i[1],u=n.events,l=n.eventDetail,d=l.showDetails,b=l.eventId,f=n.pageSize,E=n.currentPage,y=n.startsAt,w=n.endsAt,C=u.length,A=function(){var e=Object(p.a)(h.a.mark((function e(t){var n,r,c,i=arguments;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]&&i[1],e.prev=1,s(!0),e.next=5,q(t);case 5:r=e.sent,a({type:D,payload:{appendEvents:n,data:r}}),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),c=e.t0.statusCode,g.b.error(Object(j.jsx)(K,{statusCode:c}),5);case 13:return e.prev=13,s(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[1,9,13,16]])})));return function(t){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){var e={limit:f};y&&w&&(e=Object(v.a)(Object(v.a)({},e),{},{startsAt:y,endsAt:w})),A(e)}),[y,w,f]);var S="Showing ".concat(C," Events");return Object(j.jsxs)(x.a,{children:[Object(j.jsx)(m.a,{className:"App__pageheader",title:"Event Viewer",ghost:!1,backIcon:!1}),Object(j.jsx)(ie.Provider,{value:a,children:Object(j.jsxs)(ae,{children:[d?Object(j.jsx)(Y,{eventId:b}):null,Object(j.jsx)(ee,{onFilterClick:function(e){e.startsAt===y&&e.endsAt===w&&e.pageSize===f||a({type:T,payload:{data:e}})}}),Object(j.jsx)(_,{events:u,isLoading:o}),o||0===C?null:Object(j.jsx)(te,{footerText:S,onLoadMoreClick:function(){var e={limit:f,offset:E};y&&w&&(e=Object(v.a)(Object(v.a)({},e),{},{startsAt:y,endsAt:w})),A(e,!0)}})]})})]})},se=function(){return Object(j.jsx)("div",{className:"AppContainer",children:Object(j.jsx)(b,{children:Object(j.jsx)(oe,{})})})},ue=(n(252),function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,266)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),c(e),i(e)}))});i.a.render(Object(j.jsx)(a.a.StrictMode,{children:Object(j.jsx)(se,{})}),document.getElementById("root")),ue()}},[[253,1,2]]]);
//# sourceMappingURL=main.bc245f95.chunk.js.map